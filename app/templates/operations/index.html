{% extends "base.html" %}

{% block title %}운영 관리 - 자산관리 시스템{% endblock %}

{% block page_header %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0">자산 운영 관리</h2>
</div>
{% endblock %}

{% block content %}
<!-- 운영 관리 대시보드 카드 -->
<div class="row mb-4">
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card shadow-sm border-start-primary h-100 py-2 operations-dashboard-card">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col-auto">
                        <i class="fas fa-exchange-alt fa-2x text-primary"></i>
                    </div>
                    <div class="col ms-3">
                        <div class="font-weight-bold text-primary text-uppercase mb-1">현재 대여 중</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">28</div>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-transparent border-0">
                <a href="{{ url_for('operations.loan_index') }}?status=대여중" class="text-decoration-none">
                    <small class="text-primary">자세히 보기 <i class="fas fa-arrow-right ms-1"></i></small>
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card shadow-sm border-start-success h-100 py-2 operations-dashboard-card">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col-auto">
                        <i class="fas fa-clock fa-2x text-success"></i>
                    </div>
                    <div class="col ms-3">
                        <div class="font-weight-bold text-success text-uppercase mb-1">오늘 반납 예정</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">3</div>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-transparent border-0">
                <a href="{{ url_for('operations.loan_index') }}?due=today" class="text-decoration-none">
                    <small class="text-success">자세히 보기 <i class="fas fa-arrow-right ms-1"></i></small>
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card shadow-sm border-start-warning h-100 py-2 operations-dashboard-card">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col-auto">
                        <i class="fas fa-exclamation-triangle fa-2x text-warning"></i>
                    </div>
                    <div class="col ms-3">
                        <div class="font-weight-bold text-warning text-uppercase mb-1">반납 지연</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">5</div>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-transparent border-0">
                <a href="{{ url_for('operations.loan_index') }}?status=overdue" class="text-decoration-none">
                    <small class="text-warning">자세히 보기 <i class="fas fa-arrow-right ms-1"></i></small>
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card shadow-sm border-start-danger h-100 py-2 operations-dashboard-card">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col-auto">
                        <i class="fas fa-trash-alt fa-2x text-danger"></i>
                    </div>
                    <div class="col ms-3">
                        <div class="font-weight-bold text-danger text-uppercase mb-1">폐기 승인 대기</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">2</div>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-transparent border-0">
                <a href="{{ url_for('operations.disposal_index') }}?status=pending" class="text-decoration-none">
                    <small class="text-danger">자세히 보기 <i class="fas fa-arrow-right ms-1"></i></small>
                </a>
            </div>
        </div>
    </div>
</div>

<!-- 자산 운영 기능 카드 -->
<div class="row">
    <!-- 자산 대여 관리 카드 -->
    <div class="col-lg-4 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-primary">자산 대여 관리</h6>
                <a href="{{ url_for('operations.loan_index') }}" class="btn-size-sm btn-primary">
                    <i class="fas fa-list fa-sm"></i> 전체 보기
                </a>
            </div>
            <div class="card-body d-flex flex-column">
                <p class="text-muted">자산의 대여 신청, 승인, 사용 현황 관리 및 모니터링</p>
                <div class="list-group mb-3">
                    <a href="{{ url_for('operations.loan_index') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        대여 현황 <i class="fas fa-chevron-right"></i>
                    </a>
                    <a href="{{ url_for('operations.loan_form') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        대여 신청/등록 <i class="fas fa-chevron-right"></i>
                    </a>
                </div>
                <div class="mt-auto text-center">
                    <a href="{{ url_for('operations.loan_form') }}" class="btn-primary-outline">
                        <i class="fas fa-plus me-1"></i> 새 대여 등록
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 자산 반납 관리 카드 -->
    <div class="col-lg-4 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-success">자산 반납 관리</h6>
                <a href="{{ url_for('operations.return_history') }}" class="btn-size-sm btn-success">
                    <i class="fas fa-list fa-sm"></i> 전체 보기
                </a>
            </div>
            <div class="card-body d-flex flex-column">
                <p class="text-muted">자산의 반납 처리, 승인 워크플로우 및 이력 관리</p>
                <div class="list-group mb-3">
                    <a href="{{ url_for('operations.return_approval_workflow') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <span><i class="fas fa-tasks me-2 text-primary"></i>승인 워크플로우</span> <i class="fas fa-chevron-right"></i>
                    </a>
                    <a href="{{ url_for('operations.return_status_tracking') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <span><i class="fas fa-chart-line me-2 text-info"></i>상태 추적</span> <i class="fas fa-chevron-right"></i>
                    </a>
                    <a href="{{ url_for('operations.return_notifications') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <span><i class="fas fa-bell me-2 text-warning"></i>알림 관리</span> <i class="fas fa-chevron-right"></i>
                    </a>
                    <a href="{{ url_for('operations.return_history') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        반납 이력 <i class="fas fa-chevron-right"></i>
                    </a>
                    <a href="{{ url_for('operations.return_form') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        반납 처리 <i class="fas fa-chevron-right"></i>
                    </a>
                </div>
                <div class="mt-auto text-center">
                    <a href="{{ url_for('operations.return_form') }}" class="btn-success-outline">
                        <i class="fas fa-undo me-1"></i> 반납 처리
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 자산 폐기 관리 카드 -->
    <div class="col-lg-4 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-danger">자산 폐기 관리</h6>
                <a href="{{ url_for('operations.disposal_index') }}" class="btn-size-sm btn-danger">
                    <i class="fas fa-list fa-sm"></i> 전체 보기
                </a>
            </div>
            <div class="card-body d-flex flex-column">
                <p class="text-muted">자산의 폐기 신청, 승인, 처리 관리</p>
                <div class="list-group mb-3">
                    <a href="{{ url_for('operations.disposal_index') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        폐기 현황 <i class="fas fa-chevron-right"></i>
                    </a>
                    <a href="{{ url_for('operations.disposal_form') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        폐기 신청/등록 <i class="fas fa-chevron-right"></i>
                    </a>
                </div>
                <div class="mt-auto text-center">
                    <a href="{{ url_for('operations.disposal_form') }}" class="btn-danger-outline">
                        <i class="fas fa-trash-alt me-1"></i> 폐기 신청
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- 자산 지급 관리 카드 -->
    <div class="col-lg-4 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-warning">자산 지급 관리</h6>
                <a href="{{ url_for('operations.allocation_management') }}" class="btn-size-sm btn-warning">
                    <i class="fas fa-list fa-sm"></i> 전체 보기
                </a>
            </div>
            <div class="card-body d-flex flex-column">
                <p class="text-muted">자산의 지급 요청, 승인, 관리 및 다중 유형 지원</p>
                <div class="list-group mb-3">
                    <a href="{{ url_for('operations.allocation_management') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        지급 현황 <i class="fas fa-chevron-right"></i>
                    </a>
                </div>
                <div class="mt-auto text-center">
                    <a href="{{ url_for('operations.allocation_management') }}" class="btn-warning-outline">
                        <i class="fas fa-hand-holding me-1"></i> 지급 요청
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- 자산 처분 계획 카드 -->
    <div class="col-lg-4 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-info">자산 처분 계획</h6>
                <a href="{{ url_for('operations.disposal_planning') }}" class="btn-size-sm btn-info">
                    <i class="fas fa-list fa-sm"></i> 전체 보기
                </a>
            </div>
            <div class="card-body d-flex flex-column">
                <p class="text-muted">자산의 매각, 기부, 이전, 폐기 등 처분 계획 수립 및 관리</p>
                <div class="list-group mb-3">
                    <a href="{{ url_for('operations.disposal_planning') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        처분 계획 현황 <i class="fas fa-chevron-right"></i>
                    </a>
                </div>
                <div class="mt-auto text-center">
                    <a href="{{ url_for('operations.disposal_planning') }}" class="btn btn-outline-info">
                        <i class="fas fa-calendar-alt me-1"></i> 계획 수립
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 자산 폐기 관리 전용 섹션 -->
<div class="row mb-4">
    <div class="col-lg-4 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-warning">폐기 계획 및 승인</h6>
                <a href="{{ url_for('operations.asset_disposal_planning') }}" class="btn-size-sm btn-warning">
                    <i class="fas fa-list fa-sm"></i> 전체 보기
                </a>
            </div>
            <div class="card-body d-flex flex-column">
                <p class="text-muted">폐기 요청부터 다단계 승인까지 체계적 관리</p>
                <div class="list-group mb-3">
                    <a href="{{ url_for('operations.asset_disposal_planning') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        폐기 계획 현황 <i class="fas fa-chevron-right"></i>
                    </a>
                                </div>
                <div class="mt-auto text-center">
                    <a href="{{ url_for('operations.asset_disposal_planning') }}" class="btn-warning-outline">
                        <i class="fas fa-clipboard-list me-1"></i> 계획 수립
                                </a>
                            </div>
                        </div>
                    </div>
    </div>
    
    <div class="col-lg-4 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-info">업그레이드/교체 관리</h6>
                <a href="{{ url_for('operations.upgrade_management') }}" class="btn-size-sm btn-info">
                    <i class="fas fa-list fa-sm"></i> 전체 보기
                </a>
            </div>
            <div class="card-body d-flex flex-column">
                <p class="text-muted">자산 업그레이드 및 교체 계획 수립 및 관리</p>
                <div class="list-group mb-3">
                    <a href="{{ url_for('operations.upgrade_management') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        업그레이드 계획 현황 <i class="fas fa-chevron-right"></i>
                    </a>
                                </div>
                <div class="mt-auto text-center">
                    <a href="{{ url_for('operations.upgrade_management') }}" class="btn btn-outline-info">
                        <i class="fas fa-sync-alt me-1"></i> 업그레이드 관리
                                </a>
                            </div>
                        </div>
                    </div>
                                </div>
    
    <div class="col-lg-4 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-success">생명주기 추적</h6>
                <a href="{{ url_for('operations.lifecycle_tracking') }}" class="btn-size-sm btn-success">
                    <i class="fas fa-list fa-sm"></i> 전체 보기
                                </a>
                            </div>
            <div class="card-body d-flex flex-column">
                <p class="text-muted">자산의 전체 생명주기 이벤트 추적 및 분석</p>
                <div class="list-group mb-3">
                    <a href="{{ url_for('operations.lifecycle_tracking') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        생명주기 이벤트 현황 <i class="fas fa-chevron-right"></i>
                    </a>
                        </div>
                <div class="mt-auto text-center">
                    <a href="{{ url_for('operations.lifecycle_tracking') }}" class="btn-success-outline">
                        <i class="fas fa-history me-1"></i> 생명주기 추적
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 반납 관리 전용 섹션 -->
<div class="row mb-4">
    <div class="col-lg-4 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-primary">승인 워크플로우</h6>
                <a href="{{ url_for('operations.return_approval_workflow') }}" class="btn-size-sm btn-primary">
                    <i class="fas fa-list fa-sm"></i> 전체 보기
                </a>
            </div>
            <div class="card-body d-flex flex-column">
                <p class="text-muted">다단계 승인 시스템으로 반납 요청을 체계적으로 관리</p>
                <div class="list-group mb-3">
                    <a href="{{ url_for('operations.return_approval_workflow') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        워크플로우 현황 <i class="fas fa-chevron-right"></i>
                    </a>
                                </div>
                <div class="mt-auto text-center">
                    <a href="{{ url_for('operations.return_approval_workflow') }}" class="btn-primary-outline">
                        <i class="fas fa-tasks me-1"></i> 워크플로우
                                </a>
                            </div>
                        </div>
                    </div>
    </div>
    
    <div class="col-lg-4 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-info">상태 추적 시스템</h6>
                <a href="{{ url_for('operations.return_status_tracking') }}" class="btn-size-sm btn-info">
                    <i class="fas fa-list fa-sm"></i> 전체 보기
                </a>
            </div>
            <div class="card-body d-flex flex-column">
                <p class="text-muted">실시간 반납 진행 상황 모니터링 및 통계</p>
                <div class="list-group mb-3">
                    <a href="{{ url_for('operations.return_status_tracking') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        추적 현황 <i class="fas fa-chevron-right"></i>
                    </a>
                                </div>
                <div class="mt-auto text-center">
                    <a href="{{ url_for('operations.return_status_tracking') }}" class="btn btn-outline-info">
                        <i class="fas fa-chart-line me-1"></i> 상태 추적
                                </a>
                            </div>
                        </div>
                    </div>
                                </div>
    
    <div class="col-lg-4 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-warning">알림 관리</h6>
                <a href="{{ url_for('operations.return_notifications') }}" class="btn-size-sm btn-warning">
                    <i class="fas fa-list fa-sm"></i> 전체 보기
                                </a>
                            </div>
            <div class="card-body d-flex flex-column">
                <p class="text-muted">자동 알림 및 리마인더 시스템 관리</p>
                <div class="list-group mb-3">
                    <a href="{{ url_for('operations.return_notifications') }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        알림 현황 <i class="fas fa-chevron-right"></i>
                    </a>
                        </div>
                <div class="mt-auto text-center">
                    <a href="{{ url_for('operations.return_notifications') }}" class="btn-warning-outline">
                        <i class="fas fa-bell me-1"></i> 알림 관리
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 두 번째 행: 추가 운영 기능 -->
<div class="row">

<!-- 추가 운영 관련 기능 -->
    <div class="col-md-6 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-info">자산 이력 조회</h6>
                <a href="{{ url_for('operations.history') }}" class="btn-size-sm btn-info">
                    <i class="fas fa-search fa-sm"></i> 이력 검색
                </a>
            </div>
            <div class="card-body">
                <p class="text-muted">자산별 대여/반납/폐기 등 모든 운영 이력을 종합적으로 조회합니다.</p>
                <div class="text-center mt-3">
                    <a href="{{ url_for('operations.history') }}" class="btn btn-outline-info">
                        <i class="fas fa-history me-1"></i> 이력 조회하기
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 mb-4">
        <div class="card shadow-sm h-100">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-secondary">운영 통계 및 보고서</h6>
                <div class="dropdown no-arrow">
                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-end shadow fade show" aria-labelledby="dropdownMenuLink">
                        <div class="dropdown-header">보고서 형식:</div>
                        <a class="dropdown-item" href="#">Excel 다운로드</a>
                        <a class="dropdown-item" href="#">PDF 다운로드</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">매월 자동 보고서 설정</a>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <p class="text-muted">자산 운영 관련 통계 및 보고서를 생성하고 다운로드합니다.</p>
                <div class="text-center mt-3">
                    <a href="{{ url_for('operations.statistics') }}" class="btn-secondary-outline">
                        <i class="fas fa-chart-bar me-1"></i> 통계 및 보고서
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/shared/operations/operations-utils.js') }}"></script>
<script src="{{ url_for('static', filename='js/shared/operations/notification-utils.js') }}"></script>
<script src="{{ url_for('static', filename='js/shared/operations/api-utils.js') }}"></script>
<script src="{{ url_for('static', filename='js/pages/operations/index.js') }}"></script>
{% endblock %} 
