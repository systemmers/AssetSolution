{% extends "base.html" %}

{% block title %}시스템 설정 - 자산관리 시스템{% endblock %}

{% block extra_css %}
<style>
/* 기본 설정 페이지 스타일 */
</style>
{% endblock %}

{% block page_header %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0">시스템 설정</h2>
</div>
{% endblock %}

{% block content %}
<!-- 안내 메시지 -->
<div class="alert alert-info">
    <i class="fas fa-info-circle me-2"></i> 시스템 설정 기능은 현재 개발중입니다. 곧 추가될 예정입니다.
</div>

<div class="row">
    <div class="col-lg-3">
        <!-- 설정 카테고리 네비게이션 -->
        <div class="list-group mb-4">
            <a href="#general" class="list-group-item list-group-item-action active" data-bs-toggle="list">
                <i class="fas fa-cog me-2"></i> 일반 설정
            </a>
            <a href="{{ url_for('settings.categories') }}" class="list-group-item list-group-item-action">
                <i class="fas fa-tags me-2"></i> 카테고리 관리
            </a>
            <a href="#assetcodes" class="list-group-item list-group-item-action" data-bs-toggle="list">
                <i class="fas fa-barcode me-2"></i> 자산번호 설정
            </a>
            <a href="#departments" class="list-group-item list-group-item-action" data-bs-toggle="list">
                <i class="fas fa-sitemap me-2"></i> 부서 관리
            </a>
            <a href="#locations" class="list-group-item list-group-item-action" data-bs-toggle="list">
                <i class="fas fa-map-marker-alt me-2"></i> 위치 관리
            </a>
            <a href="#status" class="list-group-item list-group-item-action" data-bs-toggle="list">
                <i class="fas fa-info-circle me-2"></i> 상태 관리
            </a>
            <a href="#fields" class="list-group-item list-group-item-action" data-bs-toggle="list">
                <i class="fas fa-list-alt me-2"></i> 사용자 정의 필드
            </a>
            <a href="#backup" class="list-group-item list-group-item-action" data-bs-toggle="list">
                <i class="fas fa-database me-2"></i> 백업 및 복원
            </a>
            <a href="#ai" class="list-group-item list-group-item-action" data-bs-toggle="list">
                <i class="fas fa-robot me-2"></i> AI 서비스 설정
            </a>
            <div class="mt-3 pt-3 border-top">
                <h6 class="text-muted mb-2">개발 도구</h6>
                <a href="{{ url_for('demo.style_guide') }}" class="btn btn-outline-info btn-sm w-100" target="_blank">
                    <i class="fas fa-palette me-2"></i> 스타일 가이드
                </a>
                <small class="text-muted d-block mt-1">UI 컴포넌트 및 디자인 시스템 확인</small>
            </div>
        </div>
    </div>
    
    <div class="col-lg-9">
        <!-- 설정 내용 -->
        <div class="tab-content">
            <!-- 일반 설정 -->
            <div class="tab-pane fade show active" id="general">
                <div class="card shadow-sm">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">일반 설정</h6>
                    </div>
                    <div class="card-body">
                        <form id="generalSettingsForm">
                            <div class="mb-3">
                                <label for="systemName" class="form-label">시스템 이름</label>
                                <input type="text" class="form-control" id="systemName" value="자산관리 시스템">
                            </div>
                            <div class="mb-3">
                                <label for="companyName" class="form-label">회사명</label>
                                <input type="text" class="form-control" id="companyName" value="(주)예시회사">
                            </div>
                            <div class="mb-3">
                                <label for="logoFile" class="form-label">로고 이미지</label>
                                <input class="form-control" type="file" id="logoFile">
                                <div class="form-text">최대 2MB, PNG 또는 JPG 파일</div>
                            </div>
                            <div class="mb-3">
                                <label for="dateFormat" class="form-label">날짜 형식</label>
                                <select class="form-select" id="dateFormat">
                                    <option value="YYYY-MM-DD" selected>YYYY-MM-DD</option>
                                    <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                                    <option value="MM/DD/YYYY">MM/DD/YYYY</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="currencyFormat" class="form-label">통화 형식</label>
                                <select class="form-select" id="currencyFormat">
                                    <option value="KRW" selected>대한민국 원화 (₩)</option>
                                    <option value="USD">미국 달러 ($)</option>
                                    <option value="EUR">유로 (€)</option>
                                    <option value="JPY">일본 엔 (¥)</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="enableNotifications" checked>
                                    <label class="form-check-label" for="enableNotifications">이메일 알림 사용</label>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-1"></i> 설정 저장
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- 카테고리 관리 (별도 페이지로 이동) -->
            <div class="tab-pane fade" id="categories">
                <div class="card shadow-sm">
                    <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">카테고리 관리</h6>
                    </div>
                    <div class="card-body text-center">
                        <div class="py-5">
                            <i class="fas fa-tags fa-3x text-muted mb-3"></i>
                            <h4>카테고리 관리</h4>
                            <p class="text-muted">카테고리는 별도 페이지에서 관리됩니다.</p>
                            <a href="{{ url_for('settings.categories') }}" class="btn-primary-solid">
                                <i class="fas fa-external-link-alt me-2"></i>
                                카테고리 관리 페이지로 이동
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 자산번호 설정 -->
            <div class="tab-pane fade" id="assetcodes">
                <div class="card shadow-sm">
                    <div class="card-header py-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <h6 class="m-0 font-weight-bold text-primary">자산번호 설정</h6>
                            <button class="btn-size-sm btn-primary">
                                <i class="fas fa-save me-1"></i> 설정 저장
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <!-- 자산번호 형식 설정 -->
                        <div class="mb-4">
                            <h6 class="fw-bold mb-3">자산번호 형식</h6>
                            
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-check mb-2">
                                        <input class="form-checkbox" type="radio" name="numberFormat" id="formatCustom" value="custom" checked>
                                        <label class="form-check-label" for="formatCustom">
                                            형식 지정
                                        </label>
                                    </div>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light"><i class="fas fa-hashtag"></i></span>
                                        <input type="text" class="form-input" id="customFormatPattern" placeholder="예: ASSET-{YYYY}-{CAT}-{SEQ}" value="ASSET-{YYYY}-{CAT}-{SEQ}">
                                        <button class="btn-secondary-outline" type="button" data-bs-toggle="popover" data-bs-trigger="focus" title="형식 도움말" data-bs-content="{YYYY}: 연도, {MM}: 월, {CAT}: 카테고리, {SEQ}: 일련번호, {LOC}: 위치">
                                            <i class="fas fa-question-circle"></i>
                                        </button>
                                    </div>
                                    <div class="form-text mb-2">결과 예시: ASSET-2023-PC-0001</div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check mb-2">
                                        <input class="form-checkbox" type="radio" name="numberFormat" id="formatAutomatic" value="automatic">
                                        <label class="form-check-label" for="formatAutomatic">
                                            자동 생성 (일련번호만)
                                        </label>
                                    </div>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">시작 번호</span>
                                        <input type="number" class="form-input" id="startingNumber" placeholder="1" value="1" min="1">
                                    </div>
                                    <div class="form-text">예시: 000001, 000002, 000003</div>
                                </div>
                            </div>
                            
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label class="form-label">일련번호 자릿수</label>
                                    <select class="form-select-custom" id="seqDigits">
                                        <option value="4" selected>4자리 (0001)</option>
                                        <option value="5">5자리 (00001)</option>
                                        <option value="6">6자리 (000001)</option>
                                        <option value="custom">사용자 지정</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check form-switch mt-4">
                                        <input class="form-checkbox" type="checkbox" id="resetSeqYearly" checked>
                                        <label class="form-check-label" for="resetSeqYearly">매년 일련번호 초기화</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle me-2"></i> 자산번호 형식을 변경해도 기존 자산의 번호는 변경되지 않습니다.
                            </div>
                        </div>
                        
                        <!-- 카테고리 연동 설정 -->
                        <div class="mb-4">
                            <h6 class="fw-bold mb-3">카테고리 연동</h6>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-check form-switch mb-2">
                                        <input class="form-checkbox" type="checkbox" id="useCategoryPrefix" checked>
                                        <label class="form-check-label" for="useCategoryPrefix">카테고리별 접두어 사용</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check form-switch mb-2">
                                        <input class="form-checkbox" type="checkbox" id="useSeparateSequence" checked>
                                        <label class="form-check-label" for="useSeparateSequence">카테고리별 일련번호 분리</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table-base table-bordered">
                                    <thead class="table-light">
                                        <tr>
                                            <th>카테고리</th>
                                            <th>접두어</th>
                                            <th>현재 일련번호</th>
                                            <th>예시</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>컴퓨터/노트북</td>
                                            <td>
                                                <input type="text" class="form-input form-input-sm" value="PC" maxlength="5">
                                            </td>
                                            <td>42</td>
                                            <td>ASSET-2023-PC-0042</td>
                                        </tr>
                                        <tr>
                                            <td>모니터</td>
                                            <td>
                                                <input type="text" class="form-input form-input-sm" value="MON" maxlength="5">
                                            </td>
                                            <td>15</td>
                                            <td>ASSET-2023-MON-0015</td>
                                        </tr>
                                        <tr>
                                            <td>주변기기</td>
                                            <td>
                                                <input type="text" class="form-input form-input-sm" value="PRH" maxlength="5">
                                            </td>
                                            <td>53</td>
                                            <td>ASSET-2023-PRH-0053</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="text-end">
                                <button class="btn-size-sm btn-outline-primary">
                                    <i class="fas fa-sync-alt me-1"></i> 카테고리 목록 새로고침
                                </button>
                            </div>
                        </div>
                        
                        <!-- 바코드/QR 설정 -->
                        <div class="mb-4">
                            <h6 class="fw-bold mb-3">바코드/QR 설정</h6>
                            
                            <div class="row mb-3">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">바코드 타입</label>
                                    <select class="form-select-custom" id="barcodeType">
                                        <option value="code128" selected>Code 128 (권장)</option>
                                        <option value="code39">Code 39</option>
                                        <option value="ean13">EAN-13</option>
                                        <option value="upc">UPC</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">QR 코드 정보</label>
                                    <select class="form-select-custom" id="qrCodeContent">
                                        <option value="assetcode" selected>자산번호만</option>
                                        <option value="assetcode_url">자산번호 + 상세 URL</option>
                                        <option value="full">전체 자산 정보</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <div class="form-check form-switch mb-2">
                                        <input class="form-checkbox" type="checkbox" id="generateLabelsAutomatically" checked>
                                        <label class="form-check-label" for="generateLabelsAutomatically">자산 등록 시 라벨 자동 생성</label>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="form-check form-switch mb-2">
                                        <input class="form-checkbox" type="checkbox" id="showHumanReadableCode" checked>
                                        <label class="form-check-label" for="showHumanReadableCode">바코드 아래 자산번호 표시</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card bg-light mb-3">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h6 class="mb-3">바코드 미리보기</h6>
                                            <div class="d-flex justify-content-center align-items-center bg-white p-3 rounded" style="height: 100px;">
                                                <img src="{{ url_for('static', filename='img/barcode-sample.png') }}" alt="바코드 예시" class="img-fluid" style="max-height: 80px;">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <h6 class="mb-3">QR 코드 미리보기</h6>
                                            <div class="d-flex justify-content-center align-items-center bg-white p-3 rounded" style="height: 100px;">
                                                <img src="{{ url_for('static', filename='img/qrcode-sample.png') }}" alt="QR 코드 예시" class="img-fluid" style="max-height: 80px;">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-end">
                                <button class="btn-primary-outline">
                                    <i class="fas fa-print me-1"></i> 라벨 템플릿 설정
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 다른 설정 탭 -->
            <div class="tab-pane fade" id="departments">
                <div class="card shadow-sm">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">부서 관리</h6>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i> 부서 관리 기능은 현재 개발중입니다.
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-pane fade" id="locations">
                <div class="card shadow-sm">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">위치 관리</h6>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i> 위치 관리 기능은 현재 개발중입니다.
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-pane fade" id="status">
                <div class="card shadow-sm">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">상태 관리</h6>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i> 상태 관리 기능은 현재 개발중입니다.
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-pane fade" id="fields">
                <div class="card shadow-sm">
                    <div class="card-header py-3">
                        <div class="d-flex justify-content-between align-items-center">
                        <h6 class="m-0 font-weight-bold text-primary">사용자 정의 필드</h6>
                            <button class="btn-size-sm btn-primary" id="addCustomField">
                                <i class="fas fa-plus me-1"></i> 새 필드 추가
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <!-- 필드 관리 영역 -->
                        <div id="customFieldsContainer">
                            <div class="text-center py-4" id="loadingFields">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">로딩 중...</span>
                                </div>
                                <p class="mt-2 text-muted">사용자 정의 필드를 로드하는 중...</p>
                            </div>
                        </div>
                        
                        <!-- 필드 타입 설명 -->
                        <div class="mt-4">
                            <h6 class="fw-bold">지원하는 필드 타입</h6>
                            <div class="row">
                                <div class="col-md-6">
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-font text-primary me-2"></i> 텍스트 (단일 줄)</li>
                                        <li><i class="fas fa-align-left text-primary me-2"></i> 텍스트영역 (여러 줄)</li>
                                        <li><i class="fas fa-list text-primary me-2"></i> 선택목록 (드롭다운)</li>
                                        <li><i class="fas fa-check-square text-primary me-2"></i> 체크박스</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-calendar text-primary me-2"></i> 날짜</li>
                                        <li><i class="fas fa-hashtag text-primary me-2"></i> 숫자</li>
                                        <li><i class="fas fa-link text-primary me-2"></i> URL</li>
                                        <li><i class="fas fa-envelope text-primary me-2"></i> 이메일</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-pane fade" id="backup">
                <div class="row">
                    <div class="col-md-6">
                        <!-- 백업 생성 -->
                        <div class="card shadow-sm mb-4">
                            <div class="card-header py-3">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="m-0 font-weight-bold text-primary">
                                        <i class="fas fa-download me-2"></i>백업 생성
                                    </h6>
                                    <button class="btn-size-sm btn-success" id="createBackupBtn">
                                        <i class="fas fa-plus me-1"></i> 새 백업
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <p class="text-muted mb-3">선택한 데이터를 백업 파일로 생성합니다.</p>
                                
                                <!-- 자동 백업 설정 -->
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-checkbox" type="checkbox" id="enableAutoBackup">
                                        <label class="form-check-label" for="enableAutoBackup">
                                            자동 백업 활성화
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">백업 주기</label>
                                        <select class="form-select-custom" id="backupInterval">
                                            <option value="daily">매일</option>
                                            <option value="weekly" selected>매주</option>
                                            <option value="monthly">매월</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">보관 기간 (일)</label>
                                        <input type="number" class="form-input" id="backupRetentionDays" value="30" min="1" max="365">
                                    </div>
                                </div>
                                
                                <!-- 백업 진행 상황 -->
                                <div id="backupProgressContainer" class="d-none">
                                    <div class="progress mb-2">
                                        <div class="progress-bar" role="progressbar" style="width: 0%" id="backupProgressBar"></div>
                                    </div>
                                    <small class="text-muted" id="backupProgressText">백업 준비 중...</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <!-- 복원 -->
                        <div class="card shadow-sm mb-4">
                            <div class="card-header py-3">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="m-0 font-weight-bold text-primary">
                                        <i class="fas fa-upload me-2"></i>복원
                                    </h6>
                                    <button class="btn-size-sm btn-warning" onclick="document.getElementById('restoreFileInput').click()">
                                        <i class="fas fa-file-upload me-1"></i> 파일 선택
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <p class="text-muted mb-3">백업 파일에서 데이터를 복원합니다.</p>
                                
                                <input type="file" id="restoreFileInput" accept=".json" class="d-none">
                                
                                <div id="restorePreviewContainer" class="d-none">
                                    <div class="alert alert-warning">
                                        <i class="fas fa-exclamation-triangle me-2"></i>
                                        <strong>주의:</strong> 복원 시 기존 데이터가 덮어쓰여집니다.
                                    </div>
                                    
                                    <div id="restorePreviewContent"></div>
                                    
                                    <div class="d-flex justify-content-end mt-3">
                                        <button class="btn-secondary-outline me-2" onclick="this.closest('.card-body').querySelector('#restorePreviewContainer').classList.add('d-none')">취소</button>
                                        <button class="btn-warning-solid" id="executeRestoreBtn">
                                            <i class="fas fa-undo me-1"></i> 복원 실행
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- 복원 진행 상황 -->
                                <div id="restoreProgressContainer" class="d-none">
                                    <div class="progress mb-2">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: 0%" id="restoreProgressBar"></div>
                                    </div>
                                    <small class="text-muted" id="restoreProgressText">복원 준비 중...</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 백업 이력 -->
                <div class="card shadow-sm">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">
                            <i class="fas fa-history me-2"></i>백업 이력
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table-interactive">
                                <thead class="table-light">
                                    <tr>
                                        <th>생성일시</th>
                                        <th>백업 유형</th>
                                        <th>파일 크기</th>
                                        <th>상태</th>
                                        <th>액션</th>
                                    </tr>
                                </thead>
                                <tbody id="backupHistoryTable">
                                    <tr>
                                        <td colspan="5" class="text-center text-muted py-4">
                                            백업 이력을 로드하는 중...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- AI 서비스 설정 -->
            <div class="tab-pane fade" id="ai">
                <div class="card shadow-sm">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">AI 서비스 설정</h6>
                    </div>
                    <div class="card-body">
                        <form id="aiSettingsForm">
                            <div class="row mb-4">
                                <div class="col-md-12">
                                    <div class="alert alert-info">
                                        <i class="fas fa-info-circle me-2"></i> AI 서비스를 사용하려면 아래 설정을 구성하세요. API 키는 암호화되어 저장됩니다.
                                    </div>
                                </div>
                            </div>
                            
                            <!-- AI 서비스 활성화 -->
                            <div class="mb-4">
                                <div class="form-check form-switch">
                                    <input class="form-checkbox" type="checkbox" id="enableAiServices">
                                    <label class="form-check-label" for="enableAiServices">AI 서비스 활성화</label>
                                </div>
                                <div class="form-text text-muted">자산 설명 생성, 자동 분류, 이상 탐지 등 AI 기능을 활성화합니다.</div>
                            </div>
                             
                            <!-- 모델 설정 -->
                            <div class="form-group mb-3">
                                <label for="aiModel" class="form-label">AI 모델</label>
                                <select class="form-select-custom" id="aiModel" name="aiModel">
                                    <option value="" selected disabled>모델 선택</option>
                                    <optgroup label="OpenAI">
                                        <option value="gpt-4o">GPT-4o</option>
                                        <option value="gpt-4-turbo">GPT-4 Turbo</option>
                                        <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                    </optgroup>
                                    <optgroup label="Anthropic">
                                        <option value="claude-3-opus">Claude 3 Opus</option>
                                        <option value="claude-3-sonnet">Claude 3 Sonnet</option>
                                        <option value="claude-3-haiku">Claude 3 Haiku</option>
                                    </optgroup>
                                    <optgroup label="Naver">
                                        <option value="hyper-clova-x">HyperCLOVA X</option>
                                    </optgroup>
                                </select>
                                <div class="form-text">선택한 모델은 API 사용량 및 비용에 영향을 미칩니다.</div>
                            </div>
                                                       
                            <!-- API 키 설정 -->
                            <div class="mb-4">
                                <label for="apiKey" class="form-label">API 키</label>
                                <div class="input-group">
                                    <input type="password" class="form-input" id="apiKey" placeholder="API 키를 입력하세요">
                                    <button class="btn-secondary-outline" type="button" id="toggleApiKey">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn-primary-outline" type="button" id="verifyApiKey">
                                        <i class="fas fa-check-circle me-1"></i> 검증
                                    </button>
                                </div>
                                <div class="form-text">API 키는 암호화되어 저장됩니다. 키가 노출되지 않도록 주의하세요.</div>
                            </div>

                            <!-- 사용자 정의 설정 -->
                            <div id="customProviderSettings" class="mb-4 d-none">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h6 class="card-title">사용자 정의 AI 제공업체 설정</h6>
                                        <div class="mb-3">
                                            <label for="customEndpoint" class="form-label">API 엔드포인트</label>
                                            <input type="text" class="form-input" id="customEndpoint" placeholder="https://api.example.com/v1">
                                        </div>
                                        <div class="mb-3">
                                            <label for="customModelId" class="form-label">모델 ID</label>
                                            <input type="text" class="form-input" id="customModelId" placeholder="model-id">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 고급 설정 -->
                            <div class="mb-4">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <label class="form-label mb-0">고급 설정</label>
                                    <button class="btn-size-sm btn-outline-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#advancedSettings">
                                        <i class="fas fa-cog me-1"></i> 표시
                                    </button>
                                </div>
                                <div class="collapse" id="advancedSettings">
                                    <div class="card bg-light">
                                        <div class="card-body">
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <label for="temperature" class="form-label">온도 (Temperature)</label>
                                                    <div class="d-flex align-items-center">
                                                        <input type="range" class="form-range" min="0" max="2" step="0.1" value="0.7" id="temperature">
                                                        <span class="ms-2" id="temperatureValue">0.7</span>
                                                    </div>
                                                    <div class="form-text">낮은 값: 일관된 결과, 높은 값: 창의적인 결과</div>
                                                </div>
                                                <div class="col-md-6">
                                                    <label for="maxTokens" class="form-label">최대 토큰</label>
                                                    <input type="number" class="form-input" id="maxTokens" value="1000" min="100" max="100000">
                                                    <div class="form-text">AI가 생성할 최대 텍스트 길이를 제한합니다</div>
                                                </div>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-checkbox" type="checkbox" id="cacheResults">
                                                <label class="form-check-label" for="cacheResults">결과 캐싱 (성능 향상)</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 사용 용도 설정 -->
                            <div class="mb-4">
                                <label class="form-label">AI 사용 용도</label>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="form-check">
                                            <input class="form-checkbox" type="checkbox" id="useForAssetDescription" checked>
                                            <label class="form-check-label" for="useForAssetDescription">자산 설명 자동 생성</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-checkbox" type="checkbox" id="useForCategorization" checked>
                                            <label class="form-check-label" for="useForCategorization">자동 카테고리 분류</label>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-check">
                                            <input class="form-checkbox" type="checkbox" id="useForAnomalyDetection">
                                            <label class="form-check-label" for="useForAnomalyDetection">이상 거래/사용 패턴 감지</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-checkbox" type="checkbox" id="useForPredictiveMaintenance">
                                            <label class="form-check-label" for="useForPredictiveMaintenance">예측 정비 추천</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 저장 버튼 -->
                            <div class="d-flex justify-content-between">
                                <button type="submit" class="btn-primary-solid">
                                    <i class="fas fa-save me-1"></i> 설정 저장
                                </button>
                                <button type="button" class="btn-secondary-outline" id="testAiConnection">
                                    <i class="fas fa-plug me-1"></i> 연결 테스트
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/settings/settings.css') }}">
{% endblock %}

{% block scripts %}
<script type="module" src="{{ url_for('static', filename='js/pages/settings/index.js') }}"></script>
{% endblock %} 

{% block modals %}
<!-- 백업 생성 모달 -->
<div class="modal fade" id="backupModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">백업 생성</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <div class="form-check">
                        <input class="form-checkbox" type="checkbox" id="selectAllBackupTypes">
                        <label class="form-check-label fw-bold" for="selectAllBackupTypes">
                            모든 데이터 유형 선택
                        </label>
                    </div>
                </div>
                
                <div class="row" id="backupTypesContainer">
                    <!-- 백업 유형들이 동적으로 렌더링됩니다 -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary-solid" data-bs-dismiss="modal">취소</button>
                <button type="button" class="btn-success-solid" id="executeBackupBtn">
                    <i class="fas fa-download me-1"></i> 백업 생성
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}
