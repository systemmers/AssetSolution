{% extends "base.html" %}

{% block title %}자산 상세 정보 - 자산관리 시스템{% endblock %}

{% block page_header %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0">자산 상세 정보</h2>
    <div>
        <a href="{{ url_for('assets.index') }}" class="btn btn-secondary me-2">
            <i class="fas fa-arrow-left me-1"></i> 목록으로
        </a>
        <a href="{{ url_for('assets.update_form', asset_id=asset.id) }}" class="btn btn-warning me-2">
            <i class="fas fa-edit me-1"></i> 수정
        </a>
        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">
            <i class="fas fa-trash-alt me-1"></i> 삭제
        </button>
    </div>
</div>
{% endblock %}

{% block content %}
<!-- 자산 기본 정보 -->
<div class="row">
    <div class="col-md-8">
        <div class="card shadow-sm mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">기본 정보</h6>
            </div>
            <div class="card-body">
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label fw-bold">자산번호</label>
                            <p>COMP-20230001</p>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">자산명</label>
                            <p>Dell XPS 15</p>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">카테고리</label>
                            <p>노트북</p>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">시리얼 번호</label>
                            <p>XPS-123456789</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label fw-bold">상태</label>
                            <p><span class="badge badge--success">사용중</span></p>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">취득일자</label>
                            <p>2023-01-15</p>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">취득가액</label>
                            <p>2,500,000원</p>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">내용연수</label>
                            <p>5년</p>
                        </div>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-12">
                        <div class="mb-3">
                            <label class="form-label fw-bold">사양/규격</label>
                            <p>CPU: Intel Core i7-12700H<br>
                               RAM: 16GB DDR5<br>
                               SSD: 1TB NVMe<br>
                               GPU: NVIDIA GeForce RTX 3050 Ti<br>
                               Display: 15.6" OLED (3.5K)</p>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">비고</label>
                            <p>개발 팀장용 고사양 노트북, 3년 제조사 보증 적용중</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 자산 이력 정보 -->
        <div class="card shadow-sm mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">사용 이력</h6>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>변경일자</th>
                                <th>사용자</th>
                                <th>부서</th>
                                <th>위치</th>
                                <th>상태</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2023-01-20</td>
                                <td>홍길동</td>
                                <td>개발팀</td>
                                <td>본사 3층</td>
                                <td><span class="badge badge--success">사용중</span></td>
                            </tr>
                            <tr>
                                <td>2023-01-15</td>
                                <td>-</td>
                                <td>IT팀</td>
                                <td>IT자산실</td>
                                <td><span class="badge badge--secondary">미지급</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- 유지보수 이력 -->
        <div class="card shadow-sm mb-4">
            <div class="card-header py-3 d-flex justify-content-between align-items-center">
                <h6 class="m-0 font-weight-bold text-primary">유지보수 이력</h6>
                <button type="button" class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#maintenanceModal">
                    <i class="fas fa-plus me-1"></i> 내역 추가
                </button>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>일자</th>
                                <th>구분</th>
                                <th>내용</th>
                                <th>처리자</th>
                                <th>비용</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 유지보수 이력이 없을 경우 -->
                            <tr>
                                <td colspan="5" class="text-center">유지보수 이력이 없습니다.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 오른쪽 사이드바 -->
    <div class="col-md-4">
        <!-- 담당자 정보 -->
        <div class="card shadow-sm mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">담당자 정보</h6>
            </div>
            <div class="card-body">
                <div class="text-center mb-3">
                    <i class="fas fa-user-circle fa-5x text-gray-300 mb-3"></i>
                    <h5>홍길동</h5>
                    <p class="text-muted">개발팀 / 팀장</p>
                </div>
                <hr>
                <div class="mb-2">
                    <small class="text-muted"><i class="fas fa-envelope me-2"></i>이메일</small>
                    <p>hong@example.com</p>
                </div>
                <div class="mb-2">
                    <small class="text-muted"><i class="fas fa-phone me-2"></i>연락처</small>
                    <p>010-1234-5678</p>
                </div>
                <div class="mb-2">
                    <small class="text-muted"><i class="fas fa-map-marker-alt me-2"></i>위치</small>
                    <p>본사 3층 개발팀</p>
                </div>
            </div>
        </div>
        
        <!-- 첨부파일 -->
        <div class="card shadow-sm mb-4">
            <div class="card-header py-3 d-flex justify-content-between align-items-center">
                <h6 class="m-0 font-weight-bold text-primary">첨부파일</h6>
                <button type="button" class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#fileModal">
                    <i class="fas fa-upload me-1"></i> 파일 추가
                </button>
            </div>
            <div class="card-body">
                <ul class="list-group">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <i class="far fa-file-pdf me-2 text-danger"></i>
                            <a href="#">구매_명세서.pdf</a>
                        </div>
                        <div>
                            <button class="btn btn-sm btn-outline-danger">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <i class="far fa-file-image me-2 text-info"></i>
                            <a href="#">자산_사진.jpg</a>
                        </div>
                        <div>
                            <button class="btn btn-sm btn-outline-danger">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        
        <!-- QR 코드 -->
        <div class="card shadow-sm mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">자산 QR 코드</h6>
            </div>
            <div class="card-body text-center">
                <div class="mb-3">
                    <i class="fas fa-qrcode fa-8x text-gray-300"></i>
                </div>
                <button class="btn btn-sm btn-primary">
                    <i class="fas fa-print me-1"></i> QR코드 인쇄
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 삭제 확인 모달 -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">자산 삭제 확인</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                정말로 이 자산을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                <form action="{{ url_for('assets.delete', asset_id=asset.id) }}" method="POST" class="d-inline">
                    <button type="submit" class="btn btn-danger">삭제</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- 유지보수 내역 추가 모달 -->
<div class="modal fade" id="maintenanceModal" tabindex="-1" aria-labelledby="maintenanceModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="maintenanceModalLabel">유지보수 내역 추가</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="maintenanceForm">
                    <div class="mb-3">
                        <label for="maintenanceDate" class="form-label">일자</label>
                        <input type="date" class="form-control" id="maintenanceDate" required>
                    </div>
                    <div class="mb-3">
                        <label for="maintenanceType" class="form-label">구분</label>
                        <select class="form-select" id="maintenanceType" required>
                            <option value="">선택하세요</option>
                            <option value="repair">수리</option>
                            <option value="upgrade">업그레이드</option>
                            <option value="inspection">정기점검</option>
                            <option value="etc">기타</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="maintenanceDesc" class="form-label">내용</label>
                        <textarea class="form-control" id="maintenanceDesc" rows="3" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="maintenanceHandler" class="form-label">처리자</label>
                        <input type="text" class="form-control" id="maintenanceHandler" required>
                    </div>
                    <div class="mb-3">
                        <label for="maintenanceCost" class="form-label">비용</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="maintenanceCost">
                            <span class="input-group-text">원</span>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                <button type="button" class="btn btn-primary">저장</button>
            </div>
        </div>
    </div>
</div>

<!-- 파일 추가 모달 -->
<div class="modal fade" id="fileModal" tabindex="-1" aria-labelledby="fileModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="fileModalLabel">파일 추가</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="fileForm">
                    <div class="mb-3">
                        <label for="fileUpload" class="form-label">파일 선택</label>
                        <input class="form-control" type="file" id="fileUpload" multiple>
                    </div>
                    <div class="mb-3">
                        <label for="fileDesc" class="form-label">설명</label>
                        <input type="text" class="form-control" id="fileDesc" placeholder="파일에 대한 설명을 입력하세요">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                <button type="button" class="btn btn-primary">업로드</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/assets/detail.css') }}">
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/pages/assets/detail.js') }}" type="module"></script>
{% endblock %} 